<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quit Smoking Tracker</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="styles.css">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
</head>
<body>
  <!-- ONBOARDING -->
  <div id="onboardingScreen" class="onboarding-screen active">
    <div class="onboarding-card">
      <h1>üö≠ –ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</h1>
      <p class="onboarding-subtitle">–ù–∞—á–Ω–∏ –ø—É—Ç—å –∫ –∑–¥–æ—Ä–æ–≤–æ–π –∂–∏–∑–Ω–∏</p>
      
      <div class="onboarding-step" id="step1">
        <label>–°–∫–æ–ª—å–∫–æ —Å–∏–≥–∞—Ä–µ—Ç –≤ –¥–µ–Ω—å –∫—É—Ä–∏—à—å?</label>
        <input type="number" id="dailyLimitInput" value="10" min="1" max="100">
      </div>
      
      <div class="onboarding-step" id="step2" style="display:none;">
        <label>–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–µ—Ä–µ–∫—É—Ä–∞–º–∏ (–º–∏–Ω—É—Ç—ã)</label>
        <input type="number" id="minIntervalInput" value="45" min="5" max="300">
      </div>
      
      <div class="onboarding-step" id="step3" style="display:none;">
        <label>–¶–µ–Ω–∞ –ø–∞—á–∫–∏ —Å–∏–≥–∞—Ä–µ—Ç (—Ä—É–±–ª–∏)</label>
        <input type="number" id="cigPriceInput" value="200" min="1" max="1000">
      </div>
      
      <button id="nextOnboardingBtn" class="btn-primary">–î–∞–ª–µ–µ ‚Üí</button>
    </div>
  </div>

  <!-- APP -->
  <div id="appScreen" style="display:none;">
    <div class="app-header">
      <h1>üö≠ –ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</h1>
      <p>–¢—ã –º–æ–ª–æ–¥–µ—Ü! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!</p>
    </div>

    <div class="tips-box" id="tipCard" style="display:none;">
      <span class="tip-icon">üí°</span>
      <span id="tipText"></span>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="main">üìä –ì–ª–∞–≤–Ω–∞—è</button>
      <button class="tab" data-tab="history">üìà –ò—Å—Ç–æ—Ä–∏—è</button>
      <button class="tab" data-tab="achievements">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
      <button class="tab" data-tab="settings">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã</button>
    </div>

    <!-- MAIN TAB -->
    <div id="main" class="tab-content active">
      <div class="card savings-card">
        <div class="savings-header">
          <span class="savings-icon">üí∞</span>
          <div class="savings-info">
            <div class="savings-label">–°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ</div>
            <div class="savings-amount" id="moneySaved">0 ‚ÇΩ</div>
            <div class="savings-cigarettes" id="cigsSaved">0 —à—Ç</div>
          </div>
        </div>
      </div>

      <div class="card stats-card">
        <div class="stat-item">
          <div class="stat-num" id="daysClean">0</div>
          <div class="stat-label">–î–Ω–µ–π –±–µ–∑ –∫—É—Ä–µ–Ω–∏—è</div>
        </div>
        <div class="stat-item">
          <div class="stat-num" id="todayCount">0</div>
          <div class="stat-label">–°–µ–≥–æ–¥–Ω—è —Å–∏–≥–∞—Ä–µ—Ç</div>
        </div>
        <div class="stat-item">
          <div class="stat-num" id="weekAvg">0</div>
          <div class="stat-label">–í —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –Ω–µ–¥–µ–ª—é</div>
        </div>
      </div>

      <div class="card progress-card">
        <div class="progress-header">
          <span>–õ–∏–º–∏—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</span>
          <span id="progressText">0/10</span>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="progressFill"></div>
        </div>
        <div class="progress-status" id="progressStatus">‚úÖ –í –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã</div>
      </div>

      <div class="card timer-card">
        <div class="timer-label">–°–ª–µ–¥—É—é—â–∏–π –ø–µ—Ä–µ–∫—É—Ä —á–µ—Ä–µ–∑:</div>
        <div class="timer-display" id="timerDisplay">00:00</div>
        <button id="smokeBtn" class="btn-primary btn-large">–ü–æ–∫—É—Ä–∏–ª üö¨</button>
        <div class="timer-status" id="statusBadge">‚úì –ú–æ–∂–Ω–æ –∫—É—Ä–∏—Ç—å</div>
      </div>

      <div class="card">
        <h3 class="card-title">–ü–µ—Ä–µ–∫—É—Ä—ã —Å–µ–≥–æ–¥–Ω—è</h3>
        <div id="todayList" class="smokes-list"></div>
      </div>
    </div>

    <!-- HISTORY TAB -->
    <div id="history" class="tab-content">
      <div class="card">
        <h3 class="card-title">üìä –ì—Ä–∞—Ñ–∏–∫ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
        <div class="chart" id="weeklyChart"></div>
      </div>

      <div class="card calendar-card">
        <div class="calendar-header">
          <h3 id="calendarMonth">–ú–µ—Å—è—Ü</h3>
          <div class="calendar-nav">
            <button id="prevMonthBtn" class="nav-btn">‚óÄ</button>
            <button id="nextMonthBtn" class="nav-btn">‚ñ∂</button>
          </div>
        </div>
        <div class="calendar-weekdays">
          <div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div>–°–±</div><div>–í—Å</div>
        </div>
        <div class="calendar-days" id="calendarDays"></div>
      </div>

      <div id="selectedDateSmokes"></div>
    </div>

    <!-- ACHIEVEMENTS TAB -->
    <div id="achievements" class="tab-content">
      <div class="achievements-grid" id="achievementsContainer"></div>
    </div>

    <!-- SETTINGS TAB -->
    <div id="settings" class="tab-content">
      <div class="card">
        <div class="setting-row">
          <span>–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç</span>
          <button class="btn-small" id="editLimitBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
        </div>
        <div class="setting-value" id="currentLimitDisplay">10 —Å–∏–≥–∞—Ä–µ—Ç</div>
      </div>

      <div class="card">
        <div class="setting-row">
          <span>–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–µ—Ä–µ–∫—É—Ä–∞–º–∏</span>
          <button class="btn-small" id="editIntervalBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
        </div>
        <div class="setting-value" id="currentIntervalDisplay">45 –º–∏–Ω—É—Ç</div>
      </div>

      <div class="card">
        <div class="setting-row">
          <span>–¶–µ–Ω–∞ –ø–∞—á–∫–∏</span>
          <button class="btn-small" id="editPriceBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
        </div>
        <div class="setting-value" id="currentPriceDisplay">200 ‚ÇΩ</div>
      </div>

      <div class="card stats-table">
        <div class="stat-row">
          <span>–í—Å–µ–≥–æ –∫—É—Ä–µ–Ω–æ</span>
          <span class="stat-val" id="totalSmokes">0</span>
        </div>
        <div class="stat-row">
          <span>–í —Å—Ä–µ–¥–Ω–µ–º –≤ –¥–µ–Ω—å</span>
          <span class="stat-val" id="avgDay">0</span>
        </div>
      </div>

      <button id="exportBtn" class="btn-secondary">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
      <button id="resetBtn" class="btn-secondary btn-danger">üîÑ –°–±—Ä–æ—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</button>
    </div>
  </div>

  <!-- MODAL -->
  <div id="reasonModal" class="modal">
    <div class="modal-box">
      <h2>–ü–æ—á–µ–º—É —Ç—ã –∫—É—Ä–∏–ª?</h2>
      <p class="modal-subtitle">–í—ã–±–µ—Ä–∏ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –ø—Ä–∏—á–∏–Ω—É</p>
      
      <div class="reason-buttons">
        <button class="reason-btn" data-reason="–°—Ç—Ä–µ—Å—Å">üò∞ –°—Ç—Ä–µ—Å—Å</button>
        <button class="reason-btn" data-reason="–°–æ—Ü–∏—É–º">üë• –õ—é–¥–∏</button>
        <button class="reason-btn" data-reason="–°–∫—É–∫–∞">üòë –°–∫—É–∫–∞</button>
        <button class="reason-btn" data-reason="–ü—Ä–∏–≤—ã—á–∫–∞">üîÑ –ü—Ä–∏–≤—ã—á–∫–∞</button>
        <button class="reason-btn" data-reason="–ê–ª–∫–æ–≥–æ–ª—å">üç∫ –°–ø–∏—Ä—Ç–Ω–æ–µ</button>
        <button class="reason-btn" data-reason="–ö–æ—Ñ–µ">‚òï –ö–æ—Ñ–µ</button>
      </div>
      
      <textarea id="reasonInput" placeholder="–ò–ª–∏ –Ω–∞–ø–∏—à–∏ —Å–≤–æ—é..."></textarea>
      
      <div class="modal-buttons">
        <button id="cancelReasonBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        <button id="confirmReasonBtn" class="btn-primary">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
