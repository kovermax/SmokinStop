<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quit Smoking Tracker</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <link rel="stylesheet" href="styles.css?v=final" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>
<body style="background: #ffffff !important; color: #1a1a1a !important;">
  <div class="container">
    <!-- ONBOARDING -->
    <div id="onboardingScreen" class="onboarding-screen active">
      <div class="onboarding-content">
        <div class="onboarding-header">üö≠ –ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</div>
        <div class="onboarding-subtitle">–¢–≤–æ–π –ø—É—Ç—å –∫ –∑–¥–æ—Ä–æ–≤–æ–π –∂–∏–∑–Ω–∏</div>
        
        <div class="onboarding-step" id="step1">
          <div class="step-title">üìä –°–∫–æ–ª—å–∫–æ —Å–∏–≥–∞—Ä–µ—Ç –≤ –¥–µ–Ω—å?</div>
          <input type="number" id="dailyLimitInput" min="1" max="100" value="5" class="modal-input" />
        </div>
        
        <div class="onboarding-step" id="step2" style="display:none;">
          <div class="step-title">‚è±Ô∏è –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–µ—Ä–µ–∫—É—Ä–∞–º–∏ (–º–∏–Ω)?</div>
          <input type="number" id="minIntervalInput" min="5" max="300" value="45" class="modal-input" />
        </div>
        
        <div class="onboarding-step" id="step3" style="display:none;">
          <div class="step-title">üí∞ –¶–µ–Ω–∞ –ø–∞—á–∫–∏ —Å–∏–≥–∞—Ä–µ—Ç (‚ÇΩ)?</div>
          <input type="number" id="cigPriceInput" min="1" max="1000" value="200" class="modal-input" />
        </div>
        
        <button class="btn btn-primary" id="nextOnboardingBtn" style="margin-top:24px; width: 100%; cursor: pointer;">–î–∞–ª–µ–µ ‚Üí</button>
      </div>
    </div>

    <!-- APP -->
    <div id="appScreen" style="display:none;">
      <div class="header">
        <h1>üö≠ –ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</h1>
        <p>–¢—ã –º–æ–ª–æ–¥–µ—Ü! –ü—Ä–æ–¥–æ–ª–∂–∞–π!</p>
      </div>
      
      <div class="tip-card" id="tipCard" style="display:none;">
        <div class="tip-icon">üí°</div>
        <div class="tip-text" id="tipText"></div>
      </div>
      
      <div class="tabs-container">
        <button class="tab-btn active" data-tab="home">üìä –ì–ª–∞–≤–Ω–∞—è</button>
        <button class="tab-btn" data-tab="history">üìà –ò—Å—Ç–æ—Ä–∏—è</button>
        <button class="tab-btn" data-tab="achievements">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="tab-btn" data-tab="settings">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã</button>
      </div>

      <!-- HOME -->
      <div id="home" class="tab-content active">
        <div class="money-card">
          <div class="money-icon">üí∞</div>
          <div class="money-info">
            <div class="money-label">–°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ</div>
            <div class="money-value" id="moneySaved">0 ‚ÇΩ</div>
            <div class="money-sublabel" id="cigsSaved">0 —à—Ç</div>
          </div>
        </div>
        
        <div class="stats">
          <div class="stat-row">
            <div class="stat-item">
              <div class="stat-value" id="daysClean">0</div>
              <div class="stat-label">–î–Ω–µ–π –±–µ–∑</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="todayCount">0</div>
              <div class="stat-label">–°–µ–≥–æ–¥–Ω—è</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="weekAvg">0</div>
              <div class="stat-label">–ù–µ–¥–µ–ª—è</div>
            </div>
          </div>
        </div>
        
        <div class="daily-progress">
          <div class="progress-header">–õ–∏–º–∏—Ç: <span id="progressCount">0</span>/<span id="progressLimit">5</span></div>
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
          <div class="progress-status" id="progressStatus">‚úÖ –í –ø—Ä–µ–¥–µ–ª–∞—Ö</div>
        </div>
        
        <div class="timer-section">
          <div class="timer-label">–°–ª–µ–¥—É—é—â–∏–π –ø–µ—Ä–µ–∫—É—Ä —á–µ—Ä–µ–∑</div>
          <div class="timer-display" id="timerDisplay">00:00</div>
          <button class="btn btn-primary" id="smokeBtn" style="cursor: pointer;">–ü–æ–∫—É—Ä–∏–ª üö¨</button>
          <div id="statusBadge" class="status-badge status-allowed">‚úì –ú–æ–∂–Ω–æ –∫—É—Ä–∏—Ç—å</div>
        </div>
        
        <div class="smokes-list">
          <div class="smokes-list-title">–°–µ–≥–æ–¥–Ω—è</div>
          <div id="todayList"></div>
        </div>
      </div>

      <!-- HISTORY -->
      <div id="history" class="tab-content">
        <div class="chart-section">
          <div class="chart-title">üìä –ó–∞ –Ω–µ–¥–µ–ª—é</div>
          <div class="chart-bars" id="weeklyChart"></div>
        </div>
        
        <div class="calendar">
          <div class="calendar-header">
            <h3 id="calendarMonthYear">–ú–µ—Å—è—Ü</h3>
            <div class="calendar-nav">
              <button class="calendar-nav-btn" id="prevMonthBtn">‚Äπ</button>
              <button class="calendar-nav-btn" id="nextMonthBtn">‚Ä∫</button>
            </div>
          </div>
          <div class="weekdays">
            <div class="weekday">–ü–Ω</div><div class="weekday">–í—Ç</div><div class="weekday">–°—Ä</div>
            <div class="weekday">–ß—Ç</div><div class="weekday">–ü—Ç</div><div class="weekday">–°–±</div><div class="weekday">–í—Å</div>
          </div>
          <div class="days" id="calendarDays"></div>
        </div>
        
        <div id="selectedDateSmokes"></div>
      </div>

      <!-- ACHIEVEMENTS -->
      <div id="achievements" class="tab-content">
        <div class="achievements-container" id="achievementsContainer"></div>
      </div>

      <!-- SETTINGS -->
      <div id="settings" class="tab-content">
        <div class="settings-section">
          <div class="settings-row">
            <span class="settings-label">–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç</span>
            <button class="btn-edit" id="editLimitBtn" style="cursor: pointer;">–ò–∑–º–µ–Ω–∏—Ç—å</button>
          </div>
          <div class="settings-row">
            <span class="settings-value" id="currentLimitDisplay">5</span>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-row">
            <span class="settings-label">–ò–Ω—Ç–µ—Ä–≤–∞–ª (–º–∏–Ω)</span>
            <button class="btn-edit" id="editIntervalBtn" style="cursor: pointer;">–ò–∑–º–µ–Ω–∏—Ç—å</button>
          </div>
          <div class="settings-row">
            <span class="settings-value" id="currentIntervalDisplay">45</span>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-row">
            <span class="settings-label">–¶–µ–Ω–∞ –ø–∞—á–∫–∏ (‚ÇΩ)</span>
            <button class="btn-edit" id="editPriceBtn" style="cursor: pointer;">–ò–∑–º–µ–Ω–∏—Ç—å</button>
          </div>
          <div class="settings-row">
            <span class="settings-value" id="currentPriceDisplay">200</span>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-row">
            <span class="settings-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
          </div>
          <div style="padding:12px 0;">
            <div class="stats-grid">
              <div class="stat-card"><div class="stat-card-value" id="totalSmokes">0</div><div class="stat-card-label">–í—Å–µ–≥–æ</div></div>
              <div class="stat-card"><div class="stat-card-value" id="avgDay">0</div><div class="stat-card-label">–í –¥–µ–Ω—å</div></div>
            </div>
          </div>
        </div>
        
        <button class="btn btn-secondary" id="exportBtn" style="cursor: pointer;">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
        <button class="btn btn-secondary" id="resetBtn" style="cursor: pointer;">üîÑ –°–±—Ä–æ—Å</button>
      </div>
    </div>
  </div>

  <!-- MODAL -->
  <div id="reasonModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">–ü—Ä–∏—á–∏–Ω–∞?</div>
      <div class="modal-body">
        <label class="modal-label">–í—ã–±–µ—Ä–∏ –∏–ª–∏ –Ω–∞–ø–∏—à–∏:</label>
        <div class="reason-buttons">
          <button class="reason-btn" data-reason="–°—Ç—Ä–µ—Å—Å" style="cursor: pointer;">üò∞ –°—Ç—Ä–µ—Å—Å</button>
          <button class="reason-btn" data-reason="–°–æ—Ü–∏—É–º" style="cursor: pointer;">üë• –õ—é–¥–∏</button>
          <button class="reason-btn" data-reason="–°–∫—É–∫–∞" style="cursor: pointer;">üòë –°–∫—É–∫–∞</button>
          <button class="reason-btn" data-reason="–ü—Ä–∏–≤—ã—á–∫–∞" style="cursor: pointer;">üîÑ –ü—Ä–∏–≤—ã—á–∫–∞</button>
          <button class="reason-btn" data-reason="–ê–ª–∫–æ–≥–æ–ª—å" style="cursor: pointer;">üç∫ –°–ø–∏—Ä—Ç–Ω–æ–µ</button>
          <button class="reason-btn" data-reason="–ö–æ—Ñ–µ" style="cursor: pointer;">‚òï –ö–æ—Ñ–µ</button>
        </div>
        <textarea class="modal-input" id="reasonInput" placeholder="–ò–ª–∏ –Ω–∞–ø–∏—à–∏..."></textarea>
      </div>
      <div class="modal-buttons">
        <button class="btn btn-secondary" id="cancelReasonBtn" style="cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn btn-primary" id="confirmReasonBtn" style="cursor: pointer;">OK</button>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç -->
  <script src="app.js"></script>
</body>
</html>
