<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- SCREEN 1: ONBOARDING -->
<div id="onboarding">
  <div class="onboarding-box">
    <h1>üö≠ –ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</h1>
    <p>–¢–≤–æ–π –ø—É—Ç—å –∫ –∑–¥–æ—Ä–æ–≤–æ–π –∂–∏–∑–Ω–∏</p>
    
    <div id="onb-step-1" class="onb-step">
      <label>–°–∫–æ–ª—å–∫–æ —Å–∏–≥–∞—Ä–µ—Ç –≤ –¥–µ–Ω—å?</label>
      <input type="number" id="onb-input-1" value="10" min="1" max="100">
    </div>
    
    <div id="onb-step-2" class="onb-step" style="display:none">
      <label>–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–µ—Ä–µ–∫—É—Ä–∞–º–∏ (–º–∏–Ω—É—Ç—ã)</label>
      <input type="number" id="onb-input-2" value="45" min="5" max="300">
    </div>
    
    <div id="onb-step-3" class="onb-step" style="display:none">
      <label>–¶–µ–Ω–∞ –ø–∞—á–∫–∏ (—Ä—É–±–ª–∏)</label>
      <input type="number" id="onb-input-3" value="200" min="1" max="1000">
    </div>
    
    <button id="onb-next-btn">–î–∞–ª–µ–µ ‚Üí</button>
  </div>
</div>

<!-- SCREEN 2: APP -->
<div id="app-screen" style="display:none">
  <div class="header">
    <h1>üö≠ –ë—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å</h1>
    <p>–¢—ã –º–æ–ª–æ–¥–µ—Ü! –ü—Ä–æ–¥–æ–ª–∂–∞–π!</p>
  </div>

  <div id="tip-box" class="tip-box" style="display:none">
    <span>üí° </span><span id="tip-text"></span>
  </div>

  <div class="tab-buttons">
    <button class="tab-btn active" data-idx="0">üìä</button>
    <button class="tab-btn" data-idx="1">üìà</button>
    <button class="tab-btn" data-idx="2">üèÜ</button>
    <button class="tab-btn" data-idx="3">‚öôÔ∏è</button>
  </div>

  <!-- TAB 0: HOME -->
  <div class="tab-view">
    <div class="card card-savings">
      <div>üí∞ –°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ</div>
      <div id="savings-amount">0 ‚ÇΩ</div>
      <div id="savings-cigs">0 —à—Ç</div>
    </div>

    <div class="card card-stats">
      <div class="stat-box">
        <div id="stat-clean">0</div>
        <div>–î–Ω–µ–π –±–µ–∑</div>
      </div>
      <div class="stat-box">
        <div id="stat-today">0</div>
        <div>–°–µ–≥–æ–¥–Ω—è</div>
      </div>
      <div class="stat-box">
        <div id="stat-week">0</div>
        <div>–ù–µ–¥–µ–ª—è</div>
      </div>
    </div>

    <div class="card">
      <div class="progress-label">–õ–∏–º–∏—Ç: <span id="progress-text">0/10</span></div>
      <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
      <div id="progress-status">‚úÖ OK</div>
    </div>

    <div class="card card-timer">
      <div>–°–ª–µ–¥—É—é—â–∏–π –ø–µ—Ä–µ–∫—É—Ä —á–µ—Ä–µ–∑:</div>
      <div id="timer-display">00:00</div>
      <button id="smoke-btn">–ü–æ–∫—É—Ä–∏–ª üö¨</button>
      <div id="timer-status">‚úì –ú–æ–∂–Ω–æ</div>
    </div>

    <div class="card">
      <h3>–°–µ–≥–æ–¥–Ω—è</h3>
      <div id="today-list"></div>
    </div>
  </div>

  <!-- TAB 1: HISTORY -->
  <div class="tab-view" style="display:none">
    <div class="card">
      <h3>–ì—Ä–∞—Ñ–∏–∫</h3>
      <div id="chart" class="chart"></div>
    </div>

    <div class="card card-calendar">
      <div class="cal-header">
        <h3 id="cal-month">–ú–µ—Å—è—Ü</h3>
        <div>
          <button id="cal-prev" class="btn-small">‚óÄ</button>
          <button id="cal-next" class="btn-small">‚ñ∂</button>
        </div>
      </div>
      <div class="cal-weekdays">
        <div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div>–°–±</div><div>–í—Å</div>
      </div>
      <div id="cal-days" class="cal-days"></div>
    </div>

    <div id="date-details"></div>
  </div>

  <!-- TAB 2: ACHIEVEMENTS -->
  <div class="tab-view" style="display:none">
    <div id="achievements-grid" class="achievements-grid"></div>
  </div>

  <!-- TAB 3: SETTINGS -->
  <div class="tab-view" style="display:none">
    <div class="card">
      <div class="setting-row">
        <span>–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç</span>
        <button id="edit-limit" class="btn-small">–ò–∑–º–µ–Ω–∏—Ç—å</button>
      </div>
      <div id="setting-limit">10 —Å–∏–≥–∞—Ä–µ—Ç</div>
    </div>

    <div class="card">
      <div class="setting-row">
        <span>–ò–Ω—Ç–µ—Ä–≤–∞–ª (–º–∏–Ω)</span>
        <button id="edit-interval" class="btn-small">–ò–∑–º–µ–Ω–∏—Ç—å</button>
      </div>
      <div id="setting-interval">45 –º–∏–Ω—É—Ç</div>
    </div>

    <div class="card">
      <div class="setting-row">
        <span>–¶–µ–Ω–∞ –ø–∞—á–∫–∏</span>
        <button id="edit-price" class="btn-small">–ò–∑–º–µ–Ω–∏—Ç—å</button>
      </div>
      <div id="setting-price">200 ‚ÇΩ</div>
    </div>

    <div class="card">
      <div class="setting-stat"><span>–í—Å–µ–≥–æ:</span> <span id="stat-total">0</span></div>
      <div class="setting-stat"><span>–í –¥–µ–Ω—å:</span> <span id="stat-avg">0</span></div>
    </div>

    <button id="export-btn">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
    <button id="reset-btn">üîÑ –°–±—Ä–æ—Å</button>
  </div>
</div>

<!-- MODAL -->
<div id="modal-reason" style="display:none">
  <div class="modal-content">
    <h2>–ü–æ—á–µ–º—É –∫—É—Ä–∏–ª?</h2>
    <div class="reason-buttons">
      <button class="reason-btn" data-reason="–°—Ç—Ä–µ—Å—Å">üò∞</button>
      <button class="reason-btn" data-reason="–õ—é–¥–∏">üë•</button>
      <button class="reason-btn" data-reason="–°–∫—É–∫–∞">üòë</button>
      <button class="reason-btn" data-reason="–ü—Ä–∏–≤—ã—á–∫–∞">üîÑ</button>
      <button class="reason-btn" data-reason="–ê–ª–∫–æ–≥–æ–ª—å">üç∫</button>
      <button class="reason-btn" data-reason="–ö–æ—Ñ–µ">‚òï</button>
    </div>
    <textarea id="reason-text" placeholder="–ò–ª–∏ –Ω–∞–ø–∏—à–∏..."></textarea>
    <div class="modal-buttons">
      <button id="modal-cancel">–û—Ç–º–µ–Ω–∞</button>
      <button id="modal-confirm">OK</button>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
